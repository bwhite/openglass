<html>
<head>
<script src="https://cdnjs.cloudflare.com/ajax/libs/zepto/1.0/zepto.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.5.2/underscore-min.js"></script>
<script src="msgpack.js"></script>
</head>
<body>
<script>
function enc(data) {
    var data_enc = msgpack.pack(data);
    var data_out = new Uint8Array(data_enc.length);
    var i;
    for (i = 0; i < data_enc.length; i++) {
        data_out[i] = data_enc[i];
    }
    return data_out;
}
window.addEventListener('message',function(e) {
parent.postMessage(enc(['widgetHeight', 50]), 'https://api.picar.us');
//parent.postMessage(enc(['shutdown']), 'https://api.picar.us');
$('#d').html(JSON.stringify(msgpack.unpack(e.data)));
},false);
</script>
<div id="d">hi</div>
</body>
</html>
